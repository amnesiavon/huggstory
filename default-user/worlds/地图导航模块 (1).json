{
    "entries": {
        "0": {
            "key": [],
            "keysecondary": [],
            "comment": "",
            "content": "# 任务：\n根据前面的故事叙述和上下文，生成一个结构化的、可折叠的“地图导航”数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则出现在故事正文的末尾。\n\n# 核心逻辑与内容要求：\n1.  **分析上下文**：评估故事的设定、当前场景、已确定的角色位置、人物关系以及 `{{user}}` 的状态。\n2.  **判断移动性 (`MOVEBLOCK`)**：\n    *   如果故事上下文表明 `{{user}}` 无法自由移动（例如，被捕、被锁住、失去行动能力），则在 `<map_data>` 的开头包含标签 `[MOVEBLOCK:YES]`。\n    *   否则，包含标签 `[MOVEBLOCK:NO]`。\n3.  **确定地点**：\n    *   根据当前故事范围定义 3 到 5 个相关的**主地点**。\n    *   为每个主地点列出 2 到 4 个相关的**次级地点**。\n4.  **填充角色**：\n    *   为每个次级地点列出当前推测在那里的角色，用逗号分隔。\n    *   角色安置必须符合逻辑，并与故事叙述和既定事实保持一致。\n    *   优先使用故事中已经引入的角色。\n    *   如果某个次级地点没有已知角色，则在冒号后留空。\n\n# 约束条件：\n1.  **用户排除**：角色 `{{user}}` 绝对不能出现在地图数据列表的任何位置。\n2.  **当前场景角色排除**：在生成此地图之前紧邻的*当前*场景中，正在与 `{{user}}` 积极互动的角色，绝对不能被列在 `<map_data>` 内的*任何*地点。他们被视为处于用户（未映射）的位置。\n3.  **角色唯一性**：通常情况下，每个角色应只出现在地图数据中的一个位置。避免在多个地点重复出现同一角色，除非叙事明确支持（这种情况很少见）。如有必要，引入通用 NPC（例如，“路人”、“店主”）来合乎逻辑地填充区域，避免不恰当地重用主要角色。\n4.  **冒险元素（可选）**：对于明确标识为冒险类型的故事，您可以在相关的次级地点包含非角色元素，如“宝箱”、“怪物”、“敌方守卫”等，将它们视为角色条目处理。\n\n# 输出格式：\n严格遵守以下可折叠的 HTML 和自定义标签格式：\n\n<details>\n<summary>**地图导航**</summary>\n<map_data>\n[MOVEBLOCK:YES/NO]\n[主地点1名称\n - 次级地点A: 角色1, 角色2\n - 次级地点B: 角色3\n - 次级地点C:\n]\n[主地点2名称\n - 次级地点D: 角色4, NPC1\n - 次级地点E: 冒险元素1\n]\n[主地点3名称\n - 次级地点F:\n - 次级地点G: 角色5\n]\n</map_data>\n</details>\n\n确保输出*仅*基于此地图块之前文本中已建立的故事上下文、角色状态和关系来生成。\n",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 0,
            "displayIndex": 0,
            "extensions": {
                "position": 4,
                "exclude_recursion": false,
                "display_index": 0,
                "probability": 100,
                "useProbability": true,
                "depth": 0,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        }
    },
    "originalData": {
        "entries": [
            {
                "id": 0,
                "keys": [],
                "secondary_keys": [],
                "comment": "",
                "content": "## 地图导航模块\n\n请根据故事与前文,于</content>后生成一个地图导航数据，包含以下元素：\n\n1. 3-5个主要地点区域\n2. 当{{user}}因为各种不可抗力无法移动,比如被绑架,被锁在体育仓库,或者被人打晕,则输出MOVEBLOCK:YES\n3. 每个主要地点下包含2-4个次级地点\n4. 每个次级地点可能存在的角色,要尽可能合理地包含故事中的登场角色（用逗号分隔，如果没有角色可以留空）\n5. 移动主体为{{user}},所以地图上其他地点出现{{user}}是不合理的\n\n数据格式要求：\n<map_data>\n[MOVEBLOCK:NO]\n[主地点1\n- 次级地点A: 角色1, 角色2\n- 次级地点B: 角色3\n- 次级地点C: ]\n[主地点2\n- 次级地点D: 角色4, 角色5\n- 次级地点E: 角色6]\n</map_data>\n\n示范:\n <map_data>\n [MOVEBLOCK:NO]\n [哲的家\n - 哲的房间:\n - 客厅:\n - 玄关: ]\n [住宅区街道\n - 哲家门口: 哲\n - 千纱家门口:千纱\n - 公园入口: ]\n [商业街\n - 便利店:\n - 游戏厅:灯山 雪\n - 书店: ]\n </map_data>\n请根据故事的设定、场景和人物关系生成这个数据，使其符合故事情境和角色分布。\n\n",
                "constant": true,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "after_char",
                "use_regex": true,
                "extensions": {
                    "position": 4,
                    "exclude_recursion": false,
                    "display_index": 0,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 0,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            }
        ],
        "name": "地图导航模块"
    }
}