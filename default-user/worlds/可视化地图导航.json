{
    "entries": {
        "0": {
            "key": [],
            "keysecondary": [],
            "comment": "样式-莫兰迪(不全面)",
            "content": "<style>\n  /* --- 导入字体和图标 --- */\n  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Poppins:wght@400;500;600&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&family=ZCOOL+QingKe+HuangYou&display=swap');\n  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css');\n\n  /* --- 主容器样式 --- */\n  .map_graph {\n    font-family: 'ZCOOL XiaoWei', 'Microsoft YaHei', sans-serif;\n    color: #6b5f56;\n    margin: 20px 0;\n    position: relative;\n    z-index: 1;\n    /* 莫兰迪色系基础变量 */\n    --gal-bg-light: #f8f4f0;      /* 背景 - 极浅米白 */\n    --gal-bg-medium: #e8e2d9;     /* 中等背景 - 浅灰褐色 */\n    --gal-border: #d3c6b9;        /* 边框/点缀 - 柔和米棕 */\n    --gal-text-dark: #6b5f56;     /* 深色文字 - 柔和深棕 */\n    --gal-text-muted: #a39589;    /* 浅色文字 - 中灰棕 */\n    --gal-primary: #b4a295;       /* 主色 - 灰玫瑰棕 */\n    --gal-primary-light: #dcd1c7; /* 浅主色 */\n    --gal-success: #a5bdaa;       /* 成功 - 柔和绿 */\n    --gal-warning: #e5d7b3;       /* 警告 - 柔和黄 */\n    --gal-danger: #d8a097;        /* 危险 - 柔和粉红 */\n    --gal-pink: #e6c6c6;          /* 粉色 - 柔和粉 */\n    --gal-purple: #c8b9d3;        /* 紫色 - 柔和薰衣草紫 */\n    \n    /* Material Design 风格 */\n    --md-border-radius-large: 20px; /* 大圆角 */\n    --md-border-radius-medium: 16px;/* 中圆角 */\n    --md-border-radius-small: 12px; /* 小圆角 */\n    --md-shadow-1: 0 2px 4px rgba(0, 0, 0, 0.08); /* 细微阴影 */\n    --md-shadow-2: 0 4px 8px rgba(0, 0, 0, 0.1);  /* 轻度阴影 */\n    --md-shadow-3: 0 6px 12px rgba(0, 0, 0, 0.12); /* 中度阴影 */\n    --md-shadow-hover: 0 8px 16px rgba(0, 0, 0, 0.15); /* 悬停阴影 */\n    \n    /* 添加地图节点颜色变量 */\n    --node-main-color: #b4a295;           /* 默认节点: 灰玫瑰棕 */\n    --node-hidden-color: #a39589;         /* 隐藏节点: 中灰棕 */\n    --node-selected-color: #d8a097;       /* 选中节点: 柔和粉红 */\n    --node-current-color: #c8b9d3;        /* 当前位置: 柔和薰衣草紫 */\n    --node-reachable-color: #a5bdaa;      /* 可达节点: 柔和绿 */\n    --node-locked-color: #d3c6b9;         /* 锁定节点: 柔和米棕 */\n    \n    /* 添加边线颜色变量 */\n    --edge-main-color: rgba(180, 162, 149, 0.5);       /* 默认边线: 半透明灰玫瑰棕 */\n    --edge-hidden-color: rgba(163, 149, 137, 0.5);     /* 隐藏边线: 半透明中灰棕 */\n    --edge-reachable-color: rgba(165, 189, 170, 0.5);  /* 可达边线: 半透明柔和绿 */\n    --edge-locked-color: rgba(211, 198, 185, 0.5);     /* 锁定边线: 半透明柔和米棕 */\n    \n    /* 锁图标颜色 */\n    --lock-icon-color: rgba(216, 160, 151, 0.9);      /* 锁图标: 近不透明柔和粉红 */\n    --lock-icon-shadow: rgba(180, 162, 149, 0.7);     /* 锁图标阴影: 半透明灰玫瑰棕 */\n    \n    /* 节点阴影效果 */\n    --node-shadow-blur: 8;                  /* 普通节点阴影模糊 */\n    --node-selected-shadow-blur: 12;        /* 选中节点阴影模糊 */\n    --node-current-shadow-blur: 15;         /* 当前位置阴影模糊 */\n    --node-locked-shadow-blur: 4;           /* 锁定节点阴影模糊 */\n    --node-reachable-shadow-blur: 10;       /* 可达节点阴影模糊 */\n    \n    /* 节点发光效果 */\n    --node-selected-glow: #d8a097;          /* 选中节点发光颜色 */\n    --node-current-glow: rgba(200, 185, 211, 0.8); /* 当前位置发光颜色 */\n    --node-current-glow-intensity: 12;      /* 当前位置发光强度 */\n    \n    /* 锁定节点样式 */\n    --lock-node-background: rgba(248, 244, 240, 0.5); /* 锁定节点背景 */\n    --lock-node-icon-color: #a39589;        /* 锁定节点图标颜色 */\n    --lock-node-text-color: #6b5f56;        /* 锁定节点文字颜色 - 使用深色文字颜色 */\n    --lock-node-shadow-color: #d3c6b9;      /* 锁定节点阴影颜色 */\n    \n    /* 警告图标颜色 */\n    --warning-icon-color: #e5d7b3;          /* 警告图标颜色 */\n  }\n  \n  .map_container {\n    background-color: var(--gal-bg-light);\n    padding: 20px;\n    border-radius: var(--md-border-radius-large);\n    box-shadow: var(--md-shadow-2);\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    border: 1px solid var(--gal-border);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  /* --- 极简纹理和效果 --- */\n  .map_container::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d3c6b9' fill-opacity='0.05'%3E%3Cpath d='M0 0h20v20H0z'/%3E%3C/g%3E%3C/svg%3E\");\n    pointer-events: none;\n    z-index: 1;\n    opacity: 0.4;\n  }\n  \n  /* --- 标题栏 --- */\n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    border-bottom: 1px solid var(--gal-border);\n    padding-bottom: 15px;\n    position: relative;\n    overflow: hidden;\n    z-index: 2;\n  }\n  \n  .map_title_bar h3 {\n    color: var(--gal-primary);\n    font-family: 'ZCOOL QingKe HuangYou', sans-serif;\n    font-size: 1.5em;\n    margin: 0;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    font-weight: 500;\n  }\n  \n  .map_title_bar h3::before,\n  .map_title_bar h3::after {\n    content: '✧';\n    display: inline-block;\n    margin: 0 10px;\n    color: var(--gal-pink);\n    font-size: 18px;\n    opacity: 0.8;\n  }\n  \n  .map_title_bar h3 i {\n    color: var(--gal-primary);\n    margin-right: 8px;\n  }\n  \n  /* --- 监视器屏幕 --- */\n  .monitor-screen {\n    background-color: white;\n    border: 1px solid var(--gal-border);\n    padding: 8px;\n    box-shadow: var(--md-shadow-1);\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 500px;\n    cursor: grab;\n    touch-action: none;\n    user-select: none;\n    -webkit-user-select: none;\n    -webkit-touch-callout: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    z-index: 2;\n    border-radius: var(--md-border-radius-medium);\n  }\n  \n  /* 添加暗角效果 */\n  .monitor-screen::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-shadow: inset 0 0 100px rgba(163, 149, 137, 0.1);\n    pointer-events: none;\n    z-index: 3;\n    border-radius: inherit;\n  }\n  \n  .monitor-screen.grabbing {\n    cursor: grabbing !important;\n  }\n  \n  #mapCanvas {\n    display: block;\n    background-color: transparent;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n  \n  /* --- 选中位置显示 --- */\n  .selected_location_display {\n    position: absolute;\n    bottom: 15px;\n    left: 15px;\n    right: 15px;\n    background-color: var(--gal-bg-light);\n    color: var(--gal-text-dark);\n    padding: 12px;\n    border-radius: var(--md-border-radius-small);\n    border: 1px solid var(--gal-border);\n    font-family: 'ZCOOL XiaoWei', sans-serif;\n    font-size: 0.95em;\n    text-align: center;\n    z-index: 5;\n    box-shadow: var(--md-shadow-1);\n  }\n  \n  .selected_location_display i {\n    margin-right: 8px;\n    color: var(--gal-primary);\n  }\n  \n  /* --- 操作区域 --- */\n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    border-top: 1px solid var(--gal-border);\n    padding-top: 15px;\n    position: relative;\n    z-index: 2;\n  }\n  \n  .go_button {\n    padding: 12px 35px;\n    background-color: var(--gal-success);\n    border: none;\n    border-radius: 50px;\n    color: white;\n    font-family: 'ZCOOL XiaoWei', sans-serif;\n    font-size: 16px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: var(--md-shadow-2);\n    position: relative;\n    font-weight: normal;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    letter-spacing: 0.5px;\n  }\n  \n  .go_button i {\n    margin-right: 8px;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background-color: #96b09b;\n    transform: translateY(-2px);\n    box-shadow: var(--md-shadow-hover);\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(1px);\n    box-shadow: var(--md-shadow-1);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background-color: var(--gal-bg-medium);\n    box-shadow: none;\n  }\n  \n  /* 确保FontAwesome图标正常显示 */\n  i.fa, i.fas, i.far, i.fab, i.fa-solid, i.fa-regular, i.fa-brands {\n    font-family: \"FontAwesome\", sans-serif !important;\n    font-style: normal;\n    display: inline-block;\n  }\n  \n  /* --- 响应式布局 --- */\n  @media (max-width: 700px) {\n    .monitor-screen {\n      height: 400px;\n    }\n    \n    .map_title_bar h3 {\n      font-size: 1.3em;\n    }\n    \n    .selected_location_display {\n      font-size: 0.9em;\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 10px;\n    }\n    \n    .go_button {\n      font-size: 15px;\n      padding: 10px 30px;\n    }\n  }\n\n  @media (max-width: 480px) {\n    .monitor-screen {\n      height: 350px;\n    }\n    \n    .map_title_bar h3 {\n      font-size: 1.1em;\n    }\n    \n    .map_title_bar h3::before,\n    .map_title_bar h3::after {\n      font-size: 16px;\n      margin: 0 5px;\n    }\n    \n    .selected_location_display {\n      font-size: 0.9em;\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 10px;\n    }\n    \n    .go_button {\n      font-size: 14px;\n      padding: 8px 25px;\n    }\n  }\n</style> ",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 0,
            "displayIndex": 8,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 8,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "1": {
            "key": [],
            "keysecondary": [],
            "comment": "设置-初始化延迟",
            "content": "50",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 1,
            "displayIndex": 9,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 9,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "2": {
            "key": [],
            "keysecondary": [],
            "comment": "样式-黑金(不全面)",
            "content": "<style>\n  /* --- 导入字体和图标 --- */\n  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Poppins:wght@400;500;600&display=swap');\n  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css');\n\n  /* --- 主容器样式 --- */\n  .map_graph {\n    font-family: 'Poppins', sans-serif;\n    color: #e8e8e8;\n    margin: 20px 0;\n    position: relative;\n    z-index: 1;\n    --shadow-dark: rgba(0, 0, 0, 0.2);\n    --shadow-light: rgba(255, 255, 255, 0.05);\n    --primary-color: #ad8a56;\n    --accent-color: #d4af70;\n    --text-color: #e8e8e8;\n    --dark-surface: #282828;\n    --darker-surface: #1a1a1a;\n    --border-color: rgba(255, 255, 255, 0.07);\n    \n    /* 添加地图节点颜色变量 */\n    --node-main-color: #ad8a56;           /* 默认节点: 金棕色 */\n    --node-hidden-color: #7c6442;         /* 隐藏节点: 深棕色 */\n    --node-selected-color: #d4af70;       /* 选中节点: 浅金色 */\n    --node-current-color: #e8e8e8;        /* 当前位置: 白色 */\n    --node-reachable-color: #c09c60;      /* 可达节点: 浅棕色 */\n    --node-locked-color: #555555;         /* 锁定节点: 灰色 */\n    \n    /* 添加边线颜色变量 */\n    --edge-main-color: rgba(173, 138, 86, 0.5);       /* 默认边线: 半透明金棕色 */\n    --edge-hidden-color: rgba(124, 100, 66, 0.5);     /* 隐藏边线: 半透明深棕色 */\n    --edge-reachable-color: rgba(192, 156, 96, 0.5);  /* 可达边线: 半透明浅棕色 */\n    --edge-locked-color: rgba(85, 85, 85, 0.5);       /* 锁定边线: 半透明灰色 */\n    \n    /* 锁图标颜色 */\n    --lock-icon-color: rgba(212, 175, 112, 0.9);      /* 锁图标: 近不透明浅金色 */\n    --lock-icon-shadow: rgba(173, 138, 86, 0.7);      /* 锁图标阴影: 半透明金棕色 */\n    \n    /* 节点阴影效果 */\n    --node-shadow-blur: 8;                  /* 普通节点阴影模糊 */\n    --node-selected-shadow-blur: 12;        /* 选中节点阴影模糊 */\n    --node-current-shadow-blur: 15;         /* 当前位置阴影模糊 */\n    --node-locked-shadow-blur: 4;           /* 锁定节点阴影模糊 */\n    --node-reachable-shadow-blur: 10;       /* 可达节点阴影模糊 */\n    \n    /* 节点发光效果 */\n    --node-selected-glow: #d4af70;          /* 选中节点发光颜色 */\n    --node-current-glow: rgba(232, 232, 232, 0.8); /* 当前位置发光颜色 */\n    --node-current-glow-intensity: 12;      /* 当前位置发光强度 */\n    \n    /* 锁定节点样式 */\n    --lock-node-background: rgba(0, 0, 0, 0.5); /* 锁定节点背景 */\n    --lock-node-icon-color: #555555;        /* 锁定节点图标颜色 */\n    --lock-node-text-color: #aaaaaa;        /* 锁定节点文字颜色 */\n    --lock-node-shadow-color: #444444;      /* 锁定节点阴影颜色 */\n    \n    /* 警告图标颜色 */\n    --warning-icon-color: #d4af70;          /* 警告图标颜色 */\n  }\n  \n  .map_container {\n    background-color: var(--darker-surface);\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: \n      10px 10px 20px var(--shadow-dark),\n      -10px -10px 20px var(--shadow-light);\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    border: 1px solid var(--border-color);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  /* --- 极简纹理和效果 --- */\n  .map_container::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.02'%3E%3Cpath d='M0 0h20v20H0z'/%3E%3C/g%3E%3C/svg%3E\");\n    pointer-events: none;\n    z-index: 1;\n    opacity: 0.4;\n  }\n  \n  /* --- 标题栏 --- */\n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 10px;\n    border-bottom: 1px solid var(--border-color);\n    padding-bottom: 15px;\n    position: relative;\n    overflow: hidden;\n    z-index: 2;\n  }\n  \n  .map_title_bar h3 {\n    color: var(--primary-color);\n    font-family: 'Montserrat', sans-serif;\n    font-size: 1.3em;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    font-weight: 500;\n  }\n  \n  .map_title_bar h3 i {\n    color: var(--accent-color);\n    margin-right: 5px;\n  }\n  \n  /* --- 监视器屏幕 --- */\n  .monitor-screen {\n    background-color: var(--darker-surface);\n    border: 1px solid var(--border-color);\n    padding: 8px;\n    box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.4);\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 500px;\n    cursor: grab;\n    touch-action: none;\n    user-select: none;\n    -webkit-user-select: none;\n    -webkit-touch-callout: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    z-index: 2;\n    border-radius: 8px;\n  }\n  \n  /* 添加暗角效果 */\n  .monitor-screen::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.6);\n    pointer-events: none;\n    z-index: 3;\n    border-radius: inherit;\n  }\n  \n  .monitor-screen.grabbing {\n    cursor: grabbing !important;\n  }\n  \n  #mapCanvas {\n    display: block;\n    background-color: transparent;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n  \n  /* --- 选中位置显示 --- */\n  .selected_location_display {\n    position: absolute;\n    bottom: 15px;\n    left: 15px;\n    right: 15px;\n    background-color: rgba(35, 35, 35, 0.9);\n    color: var(--text-color);\n    padding: 12px;\n    border-radius: 8px;\n    border: 1px solid var(--border-color);\n    font-family: 'Poppins', sans-serif;\n    font-size: 0.95em;\n    text-align: center;\n    z-index: 5;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n  }\n  \n  .selected_location_display i {\n    margin-right: 8px;\n    color: var(--primary-color);\n  }\n  \n  /* --- 操作区域 --- */\n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    border-top: 1px solid var(--border-color);\n    padding-top: 15px;\n    position: relative;\n    z-index: 2;\n  }\n  \n  .go_button {\n    padding: 10px 24px;\n    background-color: var(--dark-surface);\n    border: 1px solid var(--border-color);\n    border-radius: 8px;\n    color: var(--text-color);\n    font-family: 'Poppins', sans-serif;\n    font-size: 0.95em;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: \n      4px 4px 10px var(--shadow-dark),\n      -2px -2px 5px var(--shadow-light);\n    position: relative;\n    font-weight: 500;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n  }\n  \n  .go_button i {\n    margin-right: 8px;\n    color: var(--primary-color);\n  }\n  \n  .go_button::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 40%;\n    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.07), transparent);\n    border-radius: 8px 8px 0 0;\n    pointer-events: none;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background-color: #303030;\n    box-shadow: \n      2px 2px 5px var(--shadow-dark),\n      -1px -1px 3px var(--shadow-light);\n    transform: translateY(-1px);\n    border-color: var(--primary-color);\n    color: var(--accent-color);\n  }\n  \n  .go_button:not(.disabled):active {\n    background-color: #252525;\n    transform: translateY(1px);\n    box-shadow: inset 2px 2px 5px var(--shadow-dark);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background-color: #252525;\n    box-shadow: none;\n  }\n  \n  /* 确保FontAwesome图标正常显示 */\n  i.fa, i.fas, i.far, i.fab, i.fa-solid, i.fa-regular, i.fa-brands {\n    font-family: \"FontAwesome\", sans-serif !important;\n    font-style: normal;\n    display: inline-block;\n  }\n  \n  /* --- 响应式布局 --- */\n  @media (max-width: 600px) {\n    .monitor-screen {\n      height: 350px;\n    }\n    \n    .map_title_bar h3 {\n      font-size: 1.1em;\n      letter-spacing: 1px;\n    }\n    \n    .selected_location_display {\n      font-size: 0.9em;\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 10px;\n    }\n    \n    .go_button {\n      font-size: 0.9em;\n      padding: 8px 20px;\n    }\n  }\n</style> ",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 2,
            "displayIndex": 7,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 7,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "3": {
            "key": [],
            "keysecondary": [],
            "comment": "设置-开启则直接发送，关闭则填在输入框",
            "content": "",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 3,
            "displayIndex": 10,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 10,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "4": {
            "key": [],
            "keysecondary": [],
            "comment": "完整提示词(用来生成完整复杂大地图)",
            "content": "# 任务\n根据前面的故事叙述和上下文，生成一个结构化的地图数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则生成一个<MapGraph>标签数据块出现在故事正文的末尾。\n\n## 设计原则\n\n创建地图数据时,请遵循以下设计原则:\n\n1.  **空间布局合理化**\n    *   避免节点过度聚集或堆叠\n    *   使用不同的X、Y坐标值,避免节点与边在同一直线上\n    *   给复杂区域预留足够空间\n\n2.  **视觉层次清晰化**\n    *   主要区域使用较大节点\n    *   次要区域使用较小节点\n    *   相关区域放置在合理的相对位置\n\n3.  **路径设计自然化**\n    *   避免边（连接线）交叉或重叠\n    *   使用不规则布局增加地图的自然感\n    *   考虑实际地形和空间关系,如室内路径应不同于室外路径\n\n4.  **功能元素多样化**\n    *   合理使用锁定路径表示需要条件才能通过的通道\n    *   使用不同的锁定类型(门锁、守卫、障碍物等)增加场景丰富度\n\n5.  **确保可达性与连通性**\n    *   **核心要求:** 保证地图上的所有非特殊设计区域（如后期解锁、传送到达等）都能从主要入口或核心区域通过一系列未锁定的边（路径）访问到。\n    *   **避免孤岛:** 防止创建出因路径全部被锁定而与地图其他部分完全断开连接的节点群组（孤岛区域）。\n    *   **检查机制:** 在设计完成后，务必进行连通性检查，确认没有因为所有路径都被锁定而产生的孤立区域。\n\n6.  **移动模式设计**\n    *   **场景匹配:** 根据地图场景性质选择合适的移动模式\n    *   **自由移动模式(fm=F):** 适用于安全区域，如城镇、村庄、营地等，允许玩家直接前往任何地点（会自动绕过锁定路径）\n    *   **相邻移动模式(fm=A):** 适用于危险区域，如迷宫、地下城、战场等，只允许玩家前往与当前位置直接相连且路径未被锁定的地点\n    *   **禁止移动模式(fm=N):** 适用于玩家无法移动的情况，如被监禁、被束缚、失去意识等状态\n    *   **单一模式原则:** 每个`<MapGraph>`标签内只能设置一种移动模式，它决定了整个地图的移动规则\n    *   **动态调整:** 如需切换移动模式，应当生成新的地图数据（新的`<MapGraph>`）\n\n## 坐标系统优化\n\n优化坐标系统可以使地图更加清晰易读:\n\n1.  **坐标间距建议**\n    *   主要节点之间建议X、Y轴间隔至少50-100单位\n    *   相关联的小节点可以距离主节点20-40单位\n    *   避免使用整10、整100等规则数字,增加少量随机性(如52而非50)\n\n2.  **坐标错开安排**\n    *   避免多个节点共享相同的X或Y坐标值\n    *   水平方向的路径,Y值应略有不同\n    *   垂直方向的路径,X值应略有不同\n\n3.  **分区布局**\n    *   不同区域使用坐标分区(如城镇、野外、地下城)\n    *   相关区域聚集但保持适当间距\n    *   对于大型地图,使用100-500范围内的较大坐标差异\n\n## 节点与边的命名规范\n\n1.  **节点ID**\n    *   使用有意义的英文标识符,如`town_square`而非`node1`\n    *   可以使用区域前缀,如`forest_clearing`、`dungeon_entrance`\n    *   相关节点使用共同前缀,如`shop_blacksmith`、`shop_alchemist`\n    *   推荐使用缩写以减少tokens消耗，如`ts`代替`town_square`\n\n2.  **边的规划**\n    *   避免创建过多不必要的连接，保持路径清晰。\n    *   优先连接物理上或逻辑上相邻的位置。\n    *   锁定边应有故事/游戏逻辑上的合理性。\n    *   **检查全局连通性:** 在规划局部连接的同时，要考虑这些连接如何构成整个地图的通路。确保有足够的未锁定边将所有非独立设计的区域整合进主地图网络中。\n\n## 地图数据格式美化\n\n为了使地图数据更易读和维护:\n\n\n1.  **保持格式一致**\n    *   保持一致的缩进和分隔符\n    *   相似类型的节点属性排列相似\n\n2.  **添加有意义的元数据**\n    *   使用元数据提供地图标题: `m:desc=河谷镇地图`\n    *   添加移动模式设置: `m:fm=A/F/N`\n\n**注意:** 在实际的`<MapGraph>`标签内避免使用注释和空行，因为这些会增加token使用量。最终提交给AI生成的地图数据应尽可能精简。\n\n## 地图数据示例片段\n\n<MapGraph>\nm:desc=河谷镇地图\nm:fm=F\n\nn:ts|c|中央广场@current|100|95|c|25\nn:mk|c|集市|152|112|r|45x30\nn:tv|c|酒馆\"醉猫\"|65|128|r|38x32\nn:th|c|市政厅|105|42|r|50x35\nn:eg|c|东城门|195|95|r|20x15\nn:wg|c|西城门|15|105|r|20x15\nn:nb|c|北桥|98|10|r|30x15\nn:mn|c|贵族庄园|102|155|r|60x40\nn:cl|c|地下室|68|168|c|12\ne:ts|mk|c\ne:ts|tv|c\ne:ts|th|c\ne:ts|eg|c\ne:ts|wg|c\ne:ts|nb|c\ne:tv|cl|ld  \ne:mk|mn|lg  \n</MapGraph>\n\n## 地图数据格式详解\n\n每个地图数据由以下几种行组成：\n\n1. **节点**: `n:id|type|label@characters|x|y|shape|dimensions`\n   * `n:`: 行类型标识符 (小写字母)\n   * `id`: 节点的唯一标识符 (建议简短，如用两个字母)\n   * `type`: c(普通)、e(当前地图出口,比如校门,车站,洞口))\n   * `label`: 节点在地图上显示的名称\n   * `@characters`: 可选。`@`符号后跟一个逗号分隔的列表，表示当前在此节点的角色或物品\n     * 如果包含`@current`或仅`@`，则该节点被标记为玩家的当前位置\n   * `x`, `y`: 节点在画布上的中心坐标（整数）\n   * `shape`: 节点形状\n     * `r`: 矩形\n     * `c`: 圆形\n   * `dimensions`: 节点尺寸\n     * 对于矩形 (`r`): 宽度x高度 (例如 `45x30`)\n     * 对于圆形 (`c`): 半径 (例如 `25`)\n\n2. **边/路径**: `e:from|to|type`\n   * `e:`: 行类型标识符 (小写字母)\n   * `from`: 起始节点的 `id`\n   * `to`: 目标节点的 `id`\n   * `type`: 边的类型/状态\n     * `c`: 普通连接，默认可通过\n     * `l`: 基础锁定，表示路径被锁定，无法通过\n     * `ld`: 门锁 (Door)，表示门被锁住，会生成\"门已锁住\"的提示\n     * `lg`: 守卫 (Guard)，表示有人守卫，会生成\"被拦住了\"的提示  \n     * `lb`: 障碍物 (Block)，表示路径被障碍物阻挡，会生成相应提示\n     * `lh`: 隐藏入口 (Hidden)，表示入口隐藏，会生成\"寻找隐藏入口\"的提示\n\n3. **元数据**: `m:key=value`\n   * `m:`: 行类型标识符 (小写字母)\n   * 支持的键:\n     * `desc`: 地图的标题，显示在地图顶部\n     * `fm`: 定义地图的移动规则\n       * `F`: 自由移动模式 - 可以选择任何地点（但会自动绕过锁定路径）\n       * `A`: 临近移动模式 - 只能选择通过未锁定路径相连的地点（默认）\n       * `N`: 禁止移动模式 - 无法选择任何地点\n\n## 不同移动模式的设计建议\n\n1. **自由移动模式地图 (m:fm=F)**\n   * **适用场景:** 城镇、村庄、安全营地、和平区域\n   * **设计特点:**\n     * 节点可以相对分散，不必全部互相连接\n     * 所有节点对玩家来说都是可到达的，但会自动寻找绕过锁定路径的路线\n     * 可以根据逻辑和视觉效果而非路径可达性布置节点\n     * 使用锁定路径限制通行，创造探索障碍\n   * **边缘布置:**\n     * 边缘节点应连接到通往其他地图的出口\n     * 出口节点可以通过锁定路径限制访问\n   * **边的重要性:**\n     * 自由移动模式下边不限制直接移动，但会影响自动路径规划\n     * 边的连接有助于玩家理解地点之间的位置关系和合理的移动路线\n\n2. **相邻移动模式地图 (m:fm=A)**\n   * **适用场景:** 迷宫、地下城、战场、危险区域\n   * **设计特点:**\n     * 边的连接和锁定状态至关重要，决定了玩家的移动路线\n     * 只有通过未锁定路径直接相连的地点才可到达\n     * 关注路径规划，可创建分支、环形路径或死胡同\n     * 有意设计瓶颈路径和关键节点\n   * **路径设计:**\n     * 主路径应清晰明确\n     * 可设计支路获取额外奖励或面对额外挑战\n     * 使用锁定路径创建需要解锁的通道\n\n3. **禁止移动模式地图 (m:fm=N)**\n   * **适用场景:** 玩家无法移动的状态，如被监禁、被束缚、昏迷、或被控制等\n   * **设计特点:**\n     * 玩家无法移动，但可以看到周围环境\n     * 前往按钮被禁用\n     * 适合表现角色的受限状态，如被囚禁、被捆绑等\n   * **使用时机:**\n     * 角色被俘虏或囚禁时\n     * 角色暂时失去行动能力时\n     * 需要表现角色处于被动状态时\n\n## 路径锁定类型设计指南\n\n1. **基础锁定 (l)**\n   * **使用场景:** 通用的锁定情况，没有特定类型\n   * **玩家提示:** \"尝试进入X，但通道被封锁了\"\n   * **视觉效果:** 虚线路径，带有普通锁图标\n   * **解锁方式:** 通常需要故事剧情推进或特殊条件\n\n2. **门锁 (ld)**\n   * **使用场景:** 有门或闸门的路径\n   * **玩家提示:** \"尝试前往X，但门被锁住了\"\n   * **视觉效果:** 虚线路径，带有门锁图标\n   * **解锁方式:** 通常需要钥匙或开锁技能\n\n3. **守卫 (lg)**\n   * **使用场景:** 有人员把守的路径\n   * **玩家提示:** \"想要进入X，但被拦住了\"\n   * **视觉效果:** 虚线路径，带有守卫图标\n   * **解锁方式:** 通常需要说服、贿赂、战斗或特殊身份\n\n4. **障碍物 (lb)**\n   * **使用场景:** 被物理障碍阻挡的路径\n   * **玩家提示:** \"尝试前往X，但通道被障碍物堵住了\"\n   * **视觉效果:** 虚线路径，带有障碍图标\n   * **解锁方式:** 通常需要工具、特殊物品或力量\n\n5. **隐藏入口 (lh)**\n   * **使用场景:** 秘密通道或隐藏入口\n   * **玩家提示:** \"在X附近寻找隐藏的入口\"\n   * **视觉效果:** 虚线路径，带有眼睛图标\n   * **解锁方式:** 通常需要观察力、特殊知识或触发机关\n\n## 常见错误与避免方法\n\n1.  **过度拥挤**\n    *   问题: 节点太多且间距太小\n    *   解决: 控制节点数量,增加坐标间距\n\n2.  **平行线过多**\n    *   问题: 多条边完全平行,视觉上混乱\n    *   解决: 调整节点坐标,使连接线有不同角度\n\n3.  **节点大小不当**\n    *   问题: 节点太大或太小导致视觉混乱\n    *   解决: 根据节点重要性设置合适大小\n\n4.  **缺乏层次**\n    *   问题: 所有元素看起来一样重要\n    *   解决: 使用不同大小和布局创造视觉层次\n\n5.  **区域孤立**\n    *   **问题:** 地图上存在一个或多个节点区域，它们因为所有连接路径都被锁定，导致玩家无法到达。\n    *   **解决:** 确保每个需要玩家访问的区域至少有一条未锁定的路径，或者提供解锁路径的方法。\n\n6.  **路径锁定类型混淆**\n    *   **问题:** 使用不符合场景逻辑的锁定类型，如在没有门的地方使用门锁类型\n    *   **解决:** 根据场景环境和故事合理选择锁定类型，确保视觉和文本提示一致\n\n7.  **移动模式设置不当**\n    *   **问题:** 为场景选择了不合适的移动模式，如为迷宫设置自由移动或为城镇设置相邻移动\n    *   **解决:** 根据地图的用途和玩家预期体验选择合适的移动模式\n\n## 进阶技巧\n\n1.  **使用几何布局**\n    *   中心-辐射型: 适合城镇和中心区域\n    *   线性-分支型: 适合道路和走廊\n    *   网格型: 适合城市街区\n    *   有机型: 适合自然区域如森林、洞穴\n\n2.  **节点位置的视觉隐喻**\n    *   高位置: 高处、塔楼、山顶\n    *   低位置: 地下、洞穴、地牢\n    *   边缘位置: 城墙、边界区域\n\n3.  **利用路径锁定进行关卡设计**\n    *   **渐进解锁:** 设计初始有多条锁定路径的区域，随着玩家进度逐步解锁，创造探索深度\n    *   **多种解锁方式:** 为同一个锁定路径提供多种解锁方法（如门既可以用钥匙打开，也可以破坏）\n    *   **环形设计:** 创建环形路径，使部分锁定后仍有替代路线\n\n4.  **移动模式的动态转换**\n    *   **场景转换:** 在玩家从城镇进入地下城时，可以切换地图并改变移动模式\n    *   **状态变化:** 可以根据游戏状态（如战斗、警戒等）生成不同移动模式的新地图\n    *   **渐进式探索:** 初次探索区域可使用相邻移动地图，熟悉后可切换为自由移动地图\n    *   **多地图联动:** 可创建多个不同移动模式的地图，通过地图出口和入口相互连接\n    *   **实现方式:** 始终通过创建新的`<MapGraph>`标签而非修改当前地图来实现移动模式的切换\n\n## 节省Token\n\n为了减少Token消耗，可以采用以下策略：\n\n1. **使用简短的ID**\n   * 使用2-3个字母的ID代替完整单词\n   * 例如：使用`ts`代替`town_square`，`mk`代替`market`\n\n2. **紧凑布局**\n   * 移除所有注释和空行",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 4,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 4,
            "displayIndex": 4,
            "extensions": {
                "position": 4,
                "exclude_recursion": false,
                "display_index": 4,
                "probability": 100,
                "useProbability": true,
                "depth": 0,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "5": {
            "key": [],
            "keysecondary": [],
            "comment": "简化版提示词(正常游玩RP使用)",
            "content": "# 任务\n根据前面的故事叙述和上下文，生成一个结构化的地图数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则生成一个<MapGraph>标签数据块出现在故事正文的末尾。\n# 地图创建指南\n\n## 设计规则\n1. **布局合理**: 节点间距均匀，避免重叠，位置符合逻辑关系\n2. **层次分明**: 主要区域使用大节点，次要区域使用小节点\n3. **路径自然**: 避免边交叉重叠，布局应不规则以增加自然感\n4. **功能多样**: 使用锁定路径表示需条件通行的通道\n5. **确保连通**: 所有区域必须从入口可达，禁止创建孤岛\n6. **地图多变**: 每次生成响应都根据剧情发展补充新的节点,新节点倾向于向{{user}}前进方向铺开,请勿在已经生成的节点过近的位置补充其他详细节点,不要改变已存在节点的位置结构名字,节点补充趋势要向外向前扩散.总节点数保持在6到12个.\n## 数据格式\n1. **节点**: `n:id|type|label|x|y|shape|size`\n   - id: 简短标识符(2-3字母)\n   - type: c(普通)、e(当前地图出口,比如校门,车站,洞口)\n   - label: 显示名称(label后面加@current代表{{user}}当前位置在此,数据里只允许出现{{user}},不能@其他人,每份地图数据内**一定有,且只有**1个@current)\n   - x,y: 坐标位置\n   - shape: r(矩形)或c(圆形)\n   - size: 矩形为宽x高，圆形为半径\n\n2. **边/路径**: `e:from|to|type`\n   - from/to: 连接的节点id\n   - type: c(普通)、l(锁定)、ld(门锁)、lg(守卫)、lb(障碍)、lh(隐藏)\n\n3. **元数据**: `m:key=value`\n   - desc: 地图标题\n   - fm: 移动规则(F自由移动/A相邻移动/N禁止移动)\n\n## 示例格式\n<MapGraph>\nm:desc=古镇探险图\nm:fm=A\n\nn:zx|c|镇中心@user|100|100|c|25\nn:sl|c|森林小路|150|100|r|40x30\nn:gc|c|古城入口|100|170|r|35x25\nn:st|c|市集摊位|50|100|r|30x20\nn:hx|c|后巷|150|50|c|15\nn:dx|c|洞穴入口|200|120|c|20\nn:jd|c|酒店|60|150|r|25x20\nn:cb|c|城堡塔楼|50|200|c|18\nn:my|c|码头|200|180|r|45x25\n\ne:zx|sl|c\ne:zx|st|c\ne:zx|gc|c\ne:zx|hx|c\ne:zx|jd|c\ne:sl|dx|c\ne:gc|cb|lg\ne:st|hx|ld\ne:gc|my|c\ne:jd|cb|c\ne:dx|my|lb\ne:hx|jd|c\n</MapGraph>",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 1,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 5,
            "displayIndex": 5,
            "extensions": {
                "position": 4,
                "exclude_recursion": false,
                "display_index": 5,
                "probability": 100,
                "useProbability": true,
                "depth": 1,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "6": {
            "key": [
                "展开新剧情"
            ],
            "keysecondary": [],
            "comment": "场景切换",
            "content": "注意!\n请于下个响应重新编写<MapGraph></MapGraph>标签内的内容为全新地点全新内容,**绝对不能**跟上个响应里的内容有任何重复!",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 999,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 6,
            "displayIndex": 6,
            "extensions": {
                "position": 4,
                "exclude_recursion": false,
                "display_index": 6,
                "probability": 100,
                "useProbability": true,
                "depth": 0,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": true,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        }
    },
    "originalData": {
        "entries": [
            {
                "id": 0,
                "keys": [],
                "secondary_keys": [],
                "comment": "样式-莫兰迪(不全面)",
                "content": "<style>\n  /* --- 导入字体和图标 --- */\n  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Poppins:wght@400;500;600&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&family=ZCOOL+QingKe+HuangYou&display=swap');\n  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css');\n\n  /* --- 主容器样式 --- */\n  .map_graph {\n    font-family: 'ZCOOL XiaoWei', 'Microsoft YaHei', sans-serif;\n    color: #6b5f56;\n    margin: 20px 0;\n    position: relative;\n    z-index: 1;\n    /* 莫兰迪色系基础变量 */\n    --gal-bg-light: #f8f4f0;      /* 背景 - 极浅米白 */\n    --gal-bg-medium: #e8e2d9;     /* 中等背景 - 浅灰褐色 */\n    --gal-border: #d3c6b9;        /* 边框/点缀 - 柔和米棕 */\n    --gal-text-dark: #6b5f56;     /* 深色文字 - 柔和深棕 */\n    --gal-text-muted: #a39589;    /* 浅色文字 - 中灰棕 */\n    --gal-primary: #b4a295;       /* 主色 - 灰玫瑰棕 */\n    --gal-primary-light: #dcd1c7; /* 浅主色 */\n    --gal-success: #a5bdaa;       /* 成功 - 柔和绿 */\n    --gal-warning: #e5d7b3;       /* 警告 - 柔和黄 */\n    --gal-danger: #d8a097;        /* 危险 - 柔和粉红 */\n    --gal-pink: #e6c6c6;          /* 粉色 - 柔和粉 */\n    --gal-purple: #c8b9d3;        /* 紫色 - 柔和薰衣草紫 */\n    \n    /* Material Design 风格 */\n    --md-border-radius-large: 20px; /* 大圆角 */\n    --md-border-radius-medium: 16px;/* 中圆角 */\n    --md-border-radius-small: 12px; /* 小圆角 */\n    --md-shadow-1: 0 2px 4px rgba(0, 0, 0, 0.08); /* 细微阴影 */\n    --md-shadow-2: 0 4px 8px rgba(0, 0, 0, 0.1);  /* 轻度阴影 */\n    --md-shadow-3: 0 6px 12px rgba(0, 0, 0, 0.12); /* 中度阴影 */\n    --md-shadow-hover: 0 8px 16px rgba(0, 0, 0, 0.15); /* 悬停阴影 */\n    \n    /* 添加地图节点颜色变量 */\n    --node-main-color: #b4a295;           /* 默认节点: 灰玫瑰棕 */\n    --node-hidden-color: #a39589;         /* 隐藏节点: 中灰棕 */\n    --node-selected-color: #d8a097;       /* 选中节点: 柔和粉红 */\n    --node-current-color: #c8b9d3;        /* 当前位置: 柔和薰衣草紫 */\n    --node-reachable-color: #a5bdaa;      /* 可达节点: 柔和绿 */\n    --node-locked-color: #d3c6b9;         /* 锁定节点: 柔和米棕 */\n    \n    /* 添加边线颜色变量 */\n    --edge-main-color: rgba(180, 162, 149, 0.5);       /* 默认边线: 半透明灰玫瑰棕 */\n    --edge-hidden-color: rgba(163, 149, 137, 0.5);     /* 隐藏边线: 半透明中灰棕 */\n    --edge-reachable-color: rgba(165, 189, 170, 0.5);  /* 可达边线: 半透明柔和绿 */\n    --edge-locked-color: rgba(211, 198, 185, 0.5);     /* 锁定边线: 半透明柔和米棕 */\n    \n    /* 锁图标颜色 */\n    --lock-icon-color: rgba(216, 160, 151, 0.9);      /* 锁图标: 近不透明柔和粉红 */\n    --lock-icon-shadow: rgba(180, 162, 149, 0.7);     /* 锁图标阴影: 半透明灰玫瑰棕 */\n    \n    /* 节点阴影效果 */\n    --node-shadow-blur: 8;                  /* 普通节点阴影模糊 */\n    --node-selected-shadow-blur: 12;        /* 选中节点阴影模糊 */\n    --node-current-shadow-blur: 15;         /* 当前位置阴影模糊 */\n    --node-locked-shadow-blur: 4;           /* 锁定节点阴影模糊 */\n    --node-reachable-shadow-blur: 10;       /* 可达节点阴影模糊 */\n    \n    /* 节点发光效果 */\n    --node-selected-glow: #d8a097;          /* 选中节点发光颜色 */\n    --node-current-glow: rgba(200, 185, 211, 0.8); /* 当前位置发光颜色 */\n    --node-current-glow-intensity: 12;      /* 当前位置发光强度 */\n    \n    /* 锁定节点样式 */\n    --lock-node-background: rgba(248, 244, 240, 0.5); /* 锁定节点背景 */\n    --lock-node-icon-color: #a39589;        /* 锁定节点图标颜色 */\n    --lock-node-text-color: #6b5f56;        /* 锁定节点文字颜色 - 使用深色文字颜色 */\n    --lock-node-shadow-color: #d3c6b9;      /* 锁定节点阴影颜色 */\n    \n    /* 警告图标颜色 */\n    --warning-icon-color: #e5d7b3;          /* 警告图标颜色 */\n  }\n  \n  .map_container {\n    background-color: var(--gal-bg-light);\n    padding: 20px;\n    border-radius: var(--md-border-radius-large);\n    box-shadow: var(--md-shadow-2);\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    border: 1px solid var(--gal-border);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  /* --- 极简纹理和效果 --- */\n  .map_container::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d3c6b9' fill-opacity='0.05'%3E%3Cpath d='M0 0h20v20H0z'/%3E%3C/g%3E%3C/svg%3E\");\n    pointer-events: none;\n    z-index: 1;\n    opacity: 0.4;\n  }\n  \n  /* --- 标题栏 --- */\n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    border-bottom: 1px solid var(--gal-border);\n    padding-bottom: 15px;\n    position: relative;\n    overflow: hidden;\n    z-index: 2;\n  }\n  \n  .map_title_bar h3 {\n    color: var(--gal-primary);\n    font-family: 'ZCOOL QingKe HuangYou', sans-serif;\n    font-size: 1.5em;\n    margin: 0;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    font-weight: 500;\n  }\n  \n  .map_title_bar h3::before,\n  .map_title_bar h3::after {\n    content: '✧';\n    display: inline-block;\n    margin: 0 10px;\n    color: var(--gal-pink);\n    font-size: 18px;\n    opacity: 0.8;\n  }\n  \n  .map_title_bar h3 i {\n    color: var(--gal-primary);\n    margin-right: 8px;\n  }\n  \n  /* --- 监视器屏幕 --- */\n  .monitor-screen {\n    background-color: white;\n    border: 1px solid var(--gal-border);\n    padding: 8px;\n    box-shadow: var(--md-shadow-1);\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 500px;\n    cursor: grab;\n    touch-action: none;\n    user-select: none;\n    -webkit-user-select: none;\n    -webkit-touch-callout: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    z-index: 2;\n    border-radius: var(--md-border-radius-medium);\n  }\n  \n  /* 添加暗角效果 */\n  .monitor-screen::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-shadow: inset 0 0 100px rgba(163, 149, 137, 0.1);\n    pointer-events: none;\n    z-index: 3;\n    border-radius: inherit;\n  }\n  \n  .monitor-screen.grabbing {\n    cursor: grabbing !important;\n  }\n  \n  #mapCanvas {\n    display: block;\n    background-color: transparent;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n  \n  /* --- 选中位置显示 --- */\n  .selected_location_display {\n    position: absolute;\n    bottom: 15px;\n    left: 15px;\n    right: 15px;\n    background-color: var(--gal-bg-light);\n    color: var(--gal-text-dark);\n    padding: 12px;\n    border-radius: var(--md-border-radius-small);\n    border: 1px solid var(--gal-border);\n    font-family: 'ZCOOL XiaoWei', sans-serif;\n    font-size: 0.95em;\n    text-align: center;\n    z-index: 5;\n    box-shadow: var(--md-shadow-1);\n  }\n  \n  .selected_location_display i {\n    margin-right: 8px;\n    color: var(--gal-primary);\n  }\n  \n  /* --- 操作区域 --- */\n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    border-top: 1px solid var(--gal-border);\n    padding-top: 15px;\n    position: relative;\n    z-index: 2;\n  }\n  \n  .go_button {\n    padding: 12px 35px;\n    background-color: var(--gal-success);\n    border: none;\n    border-radius: 50px;\n    color: white;\n    font-family: 'ZCOOL XiaoWei', sans-serif;\n    font-size: 16px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: var(--md-shadow-2);\n    position: relative;\n    font-weight: normal;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    letter-spacing: 0.5px;\n  }\n  \n  .go_button i {\n    margin-right: 8px;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background-color: #96b09b;\n    transform: translateY(-2px);\n    box-shadow: var(--md-shadow-hover);\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(1px);\n    box-shadow: var(--md-shadow-1);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background-color: var(--gal-bg-medium);\n    box-shadow: none;\n  }\n  \n  /* 确保FontAwesome图标正常显示 */\n  i.fa, i.fas, i.far, i.fab, i.fa-solid, i.fa-regular, i.fa-brands {\n    font-family: \"FontAwesome\", sans-serif !important;\n    font-style: normal;\n    display: inline-block;\n  }\n  \n  /* --- 响应式布局 --- */\n  @media (max-width: 700px) {\n    .monitor-screen {\n      height: 400px;\n    }\n    \n    .map_title_bar h3 {\n      font-size: 1.3em;\n    }\n    \n    .selected_location_display {\n      font-size: 0.9em;\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 10px;\n    }\n    \n    .go_button {\n      font-size: 15px;\n      padding: 10px 30px;\n    }\n  }\n\n  @media (max-width: 480px) {\n    .monitor-screen {\n      height: 350px;\n    }\n    \n    .map_title_bar h3 {\n      font-size: 1.1em;\n    }\n    \n    .map_title_bar h3::before,\n    .map_title_bar h3::after {\n      font-size: 16px;\n      margin: 0 5px;\n    }\n    \n    .selected_location_display {\n      font-size: 0.9em;\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 10px;\n    }\n    \n    .go_button {\n      font-size: 14px;\n      padding: 8px 25px;\n    }\n  }\n</style> ",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": false,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 8,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 1,
                "keys": [],
                "secondary_keys": [],
                "comment": "设置-初始化延迟",
                "content": "50",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 9,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 2,
                "keys": [],
                "secondary_keys": [],
                "comment": "样式-黑金(不全面)",
                "content": "<style>\n  /* --- 导入字体和图标 --- */\n  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Poppins:wght@400;500;600&display=swap');\n  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css');\n\n  /* --- 主容器样式 --- */\n  .map_graph {\n    font-family: 'Poppins', sans-serif;\n    color: #e8e8e8;\n    margin: 20px 0;\n    position: relative;\n    z-index: 1;\n    --shadow-dark: rgba(0, 0, 0, 0.2);\n    --shadow-light: rgba(255, 255, 255, 0.05);\n    --primary-color: #ad8a56;\n    --accent-color: #d4af70;\n    --text-color: #e8e8e8;\n    --dark-surface: #282828;\n    --darker-surface: #1a1a1a;\n    --border-color: rgba(255, 255, 255, 0.07);\n    \n    /* 添加地图节点颜色变量 */\n    --node-main-color: #ad8a56;           /* 默认节点: 金棕色 */\n    --node-hidden-color: #7c6442;         /* 隐藏节点: 深棕色 */\n    --node-selected-color: #d4af70;       /* 选中节点: 浅金色 */\n    --node-current-color: #e8e8e8;        /* 当前位置: 白色 */\n    --node-reachable-color: #c09c60;      /* 可达节点: 浅棕色 */\n    --node-locked-color: #555555;         /* 锁定节点: 灰色 */\n    \n    /* 添加边线颜色变量 */\n    --edge-main-color: rgba(173, 138, 86, 0.5);       /* 默认边线: 半透明金棕色 */\n    --edge-hidden-color: rgba(124, 100, 66, 0.5);     /* 隐藏边线: 半透明深棕色 */\n    --edge-reachable-color: rgba(192, 156, 96, 0.5);  /* 可达边线: 半透明浅棕色 */\n    --edge-locked-color: rgba(85, 85, 85, 0.5);       /* 锁定边线: 半透明灰色 */\n    \n    /* 锁图标颜色 */\n    --lock-icon-color: rgba(212, 175, 112, 0.9);      /* 锁图标: 近不透明浅金色 */\n    --lock-icon-shadow: rgba(173, 138, 86, 0.7);      /* 锁图标阴影: 半透明金棕色 */\n    \n    /* 节点阴影效果 */\n    --node-shadow-blur: 8;                  /* 普通节点阴影模糊 */\n    --node-selected-shadow-blur: 12;        /* 选中节点阴影模糊 */\n    --node-current-shadow-blur: 15;         /* 当前位置阴影模糊 */\n    --node-locked-shadow-blur: 4;           /* 锁定节点阴影模糊 */\n    --node-reachable-shadow-blur: 10;       /* 可达节点阴影模糊 */\n    \n    /* 节点发光效果 */\n    --node-selected-glow: #d4af70;          /* 选中节点发光颜色 */\n    --node-current-glow: rgba(232, 232, 232, 0.8); /* 当前位置发光颜色 */\n    --node-current-glow-intensity: 12;      /* 当前位置发光强度 */\n    \n    /* 锁定节点样式 */\n    --lock-node-background: rgba(0, 0, 0, 0.5); /* 锁定节点背景 */\n    --lock-node-icon-color: #555555;        /* 锁定节点图标颜色 */\n    --lock-node-text-color: #aaaaaa;        /* 锁定节点文字颜色 */\n    --lock-node-shadow-color: #444444;      /* 锁定节点阴影颜色 */\n    \n    /* 警告图标颜色 */\n    --warning-icon-color: #d4af70;          /* 警告图标颜色 */\n  }\n  \n  .map_container {\n    background-color: var(--darker-surface);\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: \n      10px 10px 20px var(--shadow-dark),\n      -10px -10px 20px var(--shadow-light);\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    border: 1px solid var(--border-color);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  /* --- 极简纹理和效果 --- */\n  .map_container::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.02'%3E%3Cpath d='M0 0h20v20H0z'/%3E%3C/g%3E%3C/svg%3E\");\n    pointer-events: none;\n    z-index: 1;\n    opacity: 0.4;\n  }\n  \n  /* --- 标题栏 --- */\n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 10px;\n    border-bottom: 1px solid var(--border-color);\n    padding-bottom: 15px;\n    position: relative;\n    overflow: hidden;\n    z-index: 2;\n  }\n  \n  .map_title_bar h3 {\n    color: var(--primary-color);\n    font-family: 'Montserrat', sans-serif;\n    font-size: 1.3em;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    font-weight: 500;\n  }\n  \n  .map_title_bar h3 i {\n    color: var(--accent-color);\n    margin-right: 5px;\n  }\n  \n  /* --- 监视器屏幕 --- */\n  .monitor-screen {\n    background-color: var(--darker-surface);\n    border: 1px solid var(--border-color);\n    padding: 8px;\n    box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.4);\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 500px;\n    cursor: grab;\n    touch-action: none;\n    user-select: none;\n    -webkit-user-select: none;\n    -webkit-touch-callout: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    z-index: 2;\n    border-radius: 8px;\n  }\n  \n  /* 添加暗角效果 */\n  .monitor-screen::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.6);\n    pointer-events: none;\n    z-index: 3;\n    border-radius: inherit;\n  }\n  \n  .monitor-screen.grabbing {\n    cursor: grabbing !important;\n  }\n  \n  #mapCanvas {\n    display: block;\n    background-color: transparent;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n  \n  /* --- 选中位置显示 --- */\n  .selected_location_display {\n    position: absolute;\n    bottom: 15px;\n    left: 15px;\n    right: 15px;\n    background-color: rgba(35, 35, 35, 0.9);\n    color: var(--text-color);\n    padding: 12px;\n    border-radius: 8px;\n    border: 1px solid var(--border-color);\n    font-family: 'Poppins', sans-serif;\n    font-size: 0.95em;\n    text-align: center;\n    z-index: 5;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n  }\n  \n  .selected_location_display i {\n    margin-right: 8px;\n    color: var(--primary-color);\n  }\n  \n  /* --- 操作区域 --- */\n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    border-top: 1px solid var(--border-color);\n    padding-top: 15px;\n    position: relative;\n    z-index: 2;\n  }\n  \n  .go_button {\n    padding: 10px 24px;\n    background-color: var(--dark-surface);\n    border: 1px solid var(--border-color);\n    border-radius: 8px;\n    color: var(--text-color);\n    font-family: 'Poppins', sans-serif;\n    font-size: 0.95em;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: \n      4px 4px 10px var(--shadow-dark),\n      -2px -2px 5px var(--shadow-light);\n    position: relative;\n    font-weight: 500;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n  }\n  \n  .go_button i {\n    margin-right: 8px;\n    color: var(--primary-color);\n  }\n  \n  .go_button::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 40%;\n    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.07), transparent);\n    border-radius: 8px 8px 0 0;\n    pointer-events: none;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background-color: #303030;\n    box-shadow: \n      2px 2px 5px var(--shadow-dark),\n      -1px -1px 3px var(--shadow-light);\n    transform: translateY(-1px);\n    border-color: var(--primary-color);\n    color: var(--accent-color);\n  }\n  \n  .go_button:not(.disabled):active {\n    background-color: #252525;\n    transform: translateY(1px);\n    box-shadow: inset 2px 2px 5px var(--shadow-dark);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background-color: #252525;\n    box-shadow: none;\n  }\n  \n  /* 确保FontAwesome图标正常显示 */\n  i.fa, i.fas, i.far, i.fab, i.fa-solid, i.fa-regular, i.fa-brands {\n    font-family: \"FontAwesome\", sans-serif !important;\n    font-style: normal;\n    display: inline-block;\n  }\n  \n  /* --- 响应式布局 --- */\n  @media (max-width: 600px) {\n    .monitor-screen {\n      height: 350px;\n    }\n    \n    .map_title_bar h3 {\n      font-size: 1.1em;\n      letter-spacing: 1px;\n    }\n    \n    .selected_location_display {\n      font-size: 0.9em;\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 10px;\n    }\n    \n    .go_button {\n      font-size: 0.9em;\n      padding: 8px 20px;\n    }\n  }\n</style> ",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": false,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 7,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 3,
                "keys": [],
                "secondary_keys": [],
                "comment": "设置-开启则直接发送，关闭则填在输入框",
                "content": "",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 10,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 4,
                "keys": [],
                "secondary_keys": [],
                "comment": "完整提示词(用来生成完整复杂大地图)",
                "content": "# 任务\n根据前面的故事叙述和上下文，生成一个结构化的地图数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则生成一个<MapGraph>标签数据块出现在故事正文的末尾。\n\n## 设计原则\n\n创建地图数据时,请遵循以下设计原则:\n\n1.  **空间布局合理化**\n    *   避免节点过度聚集或堆叠\n    *   使用不同的X、Y坐标值,避免节点与边在同一直线上\n    *   给复杂区域预留足够空间\n\n2.  **视觉层次清晰化**\n    *   主要区域使用较大节点\n    *   次要区域使用较小节点\n    *   相关区域放置在合理的相对位置\n\n3.  **路径设计自然化**\n    *   避免边（连接线）交叉或重叠\n    *   使用不规则布局增加地图的自然感\n    *   考虑实际地形和空间关系,如室内路径应不同于室外路径\n\n4.  **功能元素多样化**\n    *   合理使用锁定路径表示需要条件才能通过的通道\n    *   使用不同的锁定类型(门锁、守卫、障碍物等)增加场景丰富度\n\n5.  **确保可达性与连通性**\n    *   **核心要求:** 保证地图上的所有非特殊设计区域（如后期解锁、传送到达等）都能从主要入口或核心区域通过一系列未锁定的边（路径）访问到。\n    *   **避免孤岛:** 防止创建出因路径全部被锁定而与地图其他部分完全断开连接的节点群组（孤岛区域）。\n    *   **检查机制:** 在设计完成后，务必进行连通性检查，确认没有因为所有路径都被锁定而产生的孤立区域。\n\n6.  **移动模式设计**\n    *   **场景匹配:** 根据地图场景性质选择合适的移动模式\n    *   **自由移动模式(fm=F):** 适用于安全区域，如城镇、村庄、营地等，允许玩家直接前往任何地点（会自动绕过锁定路径）\n    *   **相邻移动模式(fm=A):** 适用于危险区域，如迷宫、地下城、战场等，只允许玩家前往与当前位置直接相连且路径未被锁定的地点\n    *   **禁止移动模式(fm=N):** 适用于玩家无法移动的情况，如被监禁、被束缚、失去意识等状态\n    *   **单一模式原则:** 每个`<MapGraph>`标签内只能设置一种移动模式，它决定了整个地图的移动规则\n    *   **动态调整:** 如需切换移动模式，应当生成新的地图数据（新的`<MapGraph>`）\n\n## 坐标系统优化\n\n优化坐标系统可以使地图更加清晰易读:\n\n1.  **坐标间距建议**\n    *   主要节点之间建议X、Y轴间隔至少50-100单位\n    *   相关联的小节点可以距离主节点20-40单位\n    *   避免使用整10、整100等规则数字,增加少量随机性(如52而非50)\n\n2.  **坐标错开安排**\n    *   避免多个节点共享相同的X或Y坐标值\n    *   水平方向的路径,Y值应略有不同\n    *   垂直方向的路径,X值应略有不同\n\n3.  **分区布局**\n    *   不同区域使用坐标分区(如城镇、野外、地下城)\n    *   相关区域聚集但保持适当间距\n    *   对于大型地图,使用100-500范围内的较大坐标差异\n\n## 节点与边的命名规范\n\n1.  **节点ID**\n    *   使用有意义的英文标识符,如`town_square`而非`node1`\n    *   可以使用区域前缀,如`forest_clearing`、`dungeon_entrance`\n    *   相关节点使用共同前缀,如`shop_blacksmith`、`shop_alchemist`\n    *   推荐使用缩写以减少tokens消耗，如`ts`代替`town_square`\n\n2.  **边的规划**\n    *   避免创建过多不必要的连接，保持路径清晰。\n    *   优先连接物理上或逻辑上相邻的位置。\n    *   锁定边应有故事/游戏逻辑上的合理性。\n    *   **检查全局连通性:** 在规划局部连接的同时，要考虑这些连接如何构成整个地图的通路。确保有足够的未锁定边将所有非独立设计的区域整合进主地图网络中。\n\n## 地图数据格式美化\n\n为了使地图数据更易读和维护:\n\n\n1.  **保持格式一致**\n    *   保持一致的缩进和分隔符\n    *   相似类型的节点属性排列相似\n\n2.  **添加有意义的元数据**\n    *   使用元数据提供地图标题: `m:desc=河谷镇地图`\n    *   添加移动模式设置: `m:fm=A/F/N`\n\n**注意:** 在实际的`<MapGraph>`标签内避免使用注释和空行，因为这些会增加token使用量。最终提交给AI生成的地图数据应尽可能精简。\n\n## 地图数据示例片段\n\n<MapGraph>\nm:desc=河谷镇地图\nm:fm=F\n\nn:ts|c|中央广场@current|100|95|c|25\nn:mk|c|集市|152|112|r|45x30\nn:tv|c|酒馆\"醉猫\"|65|128|r|38x32\nn:th|c|市政厅|105|42|r|50x35\nn:eg|c|东城门|195|95|r|20x15\nn:wg|c|西城门|15|105|r|20x15\nn:nb|c|北桥|98|10|r|30x15\nn:mn|c|贵族庄园|102|155|r|60x40\nn:cl|c|地下室|68|168|c|12\ne:ts|mk|c\ne:ts|tv|c\ne:ts|th|c\ne:ts|eg|c\ne:ts|wg|c\ne:ts|nb|c\ne:tv|cl|ld  \ne:mk|mn|lg  \n</MapGraph>\n\n## 地图数据格式详解\n\n每个地图数据由以下几种行组成：\n\n1. **节点**: `n:id|type|label@characters|x|y|shape|dimensions`\n   * `n:`: 行类型标识符 (小写字母)\n   * `id`: 节点的唯一标识符 (建议简短，如用两个字母)\n   * `type`: c(普通)、e(当前地图出口,比如校门,车站,洞口))\n   * `label`: 节点在地图上显示的名称\n   * `@characters`: 可选。`@`符号后跟一个逗号分隔的列表，表示当前在此节点的角色或物品\n     * 如果包含`@current`或仅`@`，则该节点被标记为玩家的当前位置\n   * `x`, `y`: 节点在画布上的中心坐标（整数）\n   * `shape`: 节点形状\n     * `r`: 矩形\n     * `c`: 圆形\n   * `dimensions`: 节点尺寸\n     * 对于矩形 (`r`): 宽度x高度 (例如 `45x30`)\n     * 对于圆形 (`c`): 半径 (例如 `25`)\n\n2. **边/路径**: `e:from|to|type`\n   * `e:`: 行类型标识符 (小写字母)\n   * `from`: 起始节点的 `id`\n   * `to`: 目标节点的 `id`\n   * `type`: 边的类型/状态\n     * `c`: 普通连接，默认可通过\n     * `l`: 基础锁定，表示路径被锁定，无法通过\n     * `ld`: 门锁 (Door)，表示门被锁住，会生成\"门已锁住\"的提示\n     * `lg`: 守卫 (Guard)，表示有人守卫，会生成\"被拦住了\"的提示  \n     * `lb`: 障碍物 (Block)，表示路径被障碍物阻挡，会生成相应提示\n     * `lh`: 隐藏入口 (Hidden)，表示入口隐藏，会生成\"寻找隐藏入口\"的提示\n\n3. **元数据**: `m:key=value`\n   * `m:`: 行类型标识符 (小写字母)\n   * 支持的键:\n     * `desc`: 地图的标题，显示在地图顶部\n     * `fm`: 定义地图的移动规则\n       * `F`: 自由移动模式 - 可以选择任何地点（但会自动绕过锁定路径）\n       * `A`: 临近移动模式 - 只能选择通过未锁定路径相连的地点（默认）\n       * `N`: 禁止移动模式 - 无法选择任何地点\n\n## 不同移动模式的设计建议\n\n1. **自由移动模式地图 (m:fm=F)**\n   * **适用场景:** 城镇、村庄、安全营地、和平区域\n   * **设计特点:**\n     * 节点可以相对分散，不必全部互相连接\n     * 所有节点对玩家来说都是可到达的，但会自动寻找绕过锁定路径的路线\n     * 可以根据逻辑和视觉效果而非路径可达性布置节点\n     * 使用锁定路径限制通行，创造探索障碍\n   * **边缘布置:**\n     * 边缘节点应连接到通往其他地图的出口\n     * 出口节点可以通过锁定路径限制访问\n   * **边的重要性:**\n     * 自由移动模式下边不限制直接移动，但会影响自动路径规划\n     * 边的连接有助于玩家理解地点之间的位置关系和合理的移动路线\n\n2. **相邻移动模式地图 (m:fm=A)**\n   * **适用场景:** 迷宫、地下城、战场、危险区域\n   * **设计特点:**\n     * 边的连接和锁定状态至关重要，决定了玩家的移动路线\n     * 只有通过未锁定路径直接相连的地点才可到达\n     * 关注路径规划，可创建分支、环形路径或死胡同\n     * 有意设计瓶颈路径和关键节点\n   * **路径设计:**\n     * 主路径应清晰明确\n     * 可设计支路获取额外奖励或面对额外挑战\n     * 使用锁定路径创建需要解锁的通道\n\n3. **禁止移动模式地图 (m:fm=N)**\n   * **适用场景:** 玩家无法移动的状态，如被监禁、被束缚、昏迷、或被控制等\n   * **设计特点:**\n     * 玩家无法移动，但可以看到周围环境\n     * 前往按钮被禁用\n     * 适合表现角色的受限状态，如被囚禁、被捆绑等\n   * **使用时机:**\n     * 角色被俘虏或囚禁时\n     * 角色暂时失去行动能力时\n     * 需要表现角色处于被动状态时\n\n## 路径锁定类型设计指南\n\n1. **基础锁定 (l)**\n   * **使用场景:** 通用的锁定情况，没有特定类型\n   * **玩家提示:** \"尝试进入X，但通道被封锁了\"\n   * **视觉效果:** 虚线路径，带有普通锁图标\n   * **解锁方式:** 通常需要故事剧情推进或特殊条件\n\n2. **门锁 (ld)**\n   * **使用场景:** 有门或闸门的路径\n   * **玩家提示:** \"尝试前往X，但门被锁住了\"\n   * **视觉效果:** 虚线路径，带有门锁图标\n   * **解锁方式:** 通常需要钥匙或开锁技能\n\n3. **守卫 (lg)**\n   * **使用场景:** 有人员把守的路径\n   * **玩家提示:** \"想要进入X，但被拦住了\"\n   * **视觉效果:** 虚线路径，带有守卫图标\n   * **解锁方式:** 通常需要说服、贿赂、战斗或特殊身份\n\n4. **障碍物 (lb)**\n   * **使用场景:** 被物理障碍阻挡的路径\n   * **玩家提示:** \"尝试前往X，但通道被障碍物堵住了\"\n   * **视觉效果:** 虚线路径，带有障碍图标\n   * **解锁方式:** 通常需要工具、特殊物品或力量\n\n5. **隐藏入口 (lh)**\n   * **使用场景:** 秘密通道或隐藏入口\n   * **玩家提示:** \"在X附近寻找隐藏的入口\"\n   * **视觉效果:** 虚线路径，带有眼睛图标\n   * **解锁方式:** 通常需要观察力、特殊知识或触发机关\n\n## 常见错误与避免方法\n\n1.  **过度拥挤**\n    *   问题: 节点太多且间距太小\n    *   解决: 控制节点数量,增加坐标间距\n\n2.  **平行线过多**\n    *   问题: 多条边完全平行,视觉上混乱\n    *   解决: 调整节点坐标,使连接线有不同角度\n\n3.  **节点大小不当**\n    *   问题: 节点太大或太小导致视觉混乱\n    *   解决: 根据节点重要性设置合适大小\n\n4.  **缺乏层次**\n    *   问题: 所有元素看起来一样重要\n    *   解决: 使用不同大小和布局创造视觉层次\n\n5.  **区域孤立**\n    *   **问题:** 地图上存在一个或多个节点区域，它们因为所有连接路径都被锁定，导致玩家无法到达。\n    *   **解决:** 确保每个需要玩家访问的区域至少有一条未锁定的路径，或者提供解锁路径的方法。\n\n6.  **路径锁定类型混淆**\n    *   **问题:** 使用不符合场景逻辑的锁定类型，如在没有门的地方使用门锁类型\n    *   **解决:** 根据场景环境和故事合理选择锁定类型，确保视觉和文本提示一致\n\n7.  **移动模式设置不当**\n    *   **问题:** 为场景选择了不合适的移动模式，如为迷宫设置自由移动或为城镇设置相邻移动\n    *   **解决:** 根据地图的用途和玩家预期体验选择合适的移动模式\n\n## 进阶技巧\n\n1.  **使用几何布局**\n    *   中心-辐射型: 适合城镇和中心区域\n    *   线性-分支型: 适合道路和走廊\n    *   网格型: 适合城市街区\n    *   有机型: 适合自然区域如森林、洞穴\n\n2.  **节点位置的视觉隐喻**\n    *   高位置: 高处、塔楼、山顶\n    *   低位置: 地下、洞穴、地牢\n    *   边缘位置: 城墙、边界区域\n\n3.  **利用路径锁定进行关卡设计**\n    *   **渐进解锁:** 设计初始有多条锁定路径的区域，随着玩家进度逐步解锁，创造探索深度\n    *   **多种解锁方式:** 为同一个锁定路径提供多种解锁方法（如门既可以用钥匙打开，也可以破坏）\n    *   **环形设计:** 创建环形路径，使部分锁定后仍有替代路线\n\n4.  **移动模式的动态转换**\n    *   **场景转换:** 在玩家从城镇进入地下城时，可以切换地图并改变移动模式\n    *   **状态变化:** 可以根据游戏状态（如战斗、警戒等）生成不同移动模式的新地图\n    *   **渐进式探索:** 初次探索区域可使用相邻移动地图，熟悉后可切换为自由移动地图\n    *   **多地图联动:** 可创建多个不同移动模式的地图，通过地图出口和入口相互连接\n    *   **实现方式:** 始终通过创建新的`<MapGraph>`标签而非修改当前地图来实现移动模式的切换\n\n## 节省Token\n\n为了减少Token消耗，可以采用以下策略：\n\n1. **使用简短的ID**\n   * 使用2-3个字母的ID代替完整单词\n   * 例如：使用`ts`代替`town_square`，`mk`代替`market`\n\n2. **紧凑布局**\n   * 移除所有注释和空行",
                "constant": true,
                "selective": true,
                "insertion_order": 100,
                "enabled": false,
                "position": "after_char",
                "use_regex": true,
                "extensions": {
                    "position": 4,
                    "exclude_recursion": false,
                    "display_index": 4,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 0,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 5,
                "keys": [],
                "secondary_keys": [],
                "comment": "简化版提示词(正常游玩RP使用)",
                "content": "# 任务\n根据前面的故事叙述和上下文，生成一个结构化的地图数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则生成一个<MapGraph>标签数据块出现在故事正文的末尾。\n# 地图创建指南\n\n## 设计规则\n1. **布局合理**: 节点间距均匀，避免重叠，位置符合逻辑关系\n2. **层次分明**: 主要区域使用大节点，次要区域使用小节点\n3. **路径自然**: 避免边交叉重叠，布局应不规则以增加自然感\n4. **功能多样**: 使用锁定路径表示需条件通行的通道\n5. **确保连通**: 所有区域必须从入口可达，禁止创建孤岛\n6. **地图多变**: 每次生成响应都根据剧情发展补充新的节点,新节点倾向于向{{user}}前进方向铺开,请勿在已经生成的节点过近的位置补充其他详细节点,不要改变已存在节点的位置结构名字,节点补充趋势要向外向前扩散.总节点数保持在6到12个.\n## 数据格式\n1. **节点**: `n:id|type|label|x|y|shape|size`\n   - id: 简短标识符(2-3字母)\n   - type: c(普通)、e(当前地图出口,比如校门,车站,洞口)\n   - label: 显示名称(label后面加@current代表{{user}}当前位置在此,数据里只允许出现{{user}},不能@其他人,每份地图数据内**一定有,且只有**1个@current)\n   - x,y: 坐标位置\n   - shape: r(矩形)或c(圆形)\n   - size: 矩形为宽x高，圆形为半径\n\n2. **边/路径**: `e:from|to|type`\n   - from/to: 连接的节点id\n   - type: c(普通)、l(锁定)、ld(门锁)、lg(守卫)、lb(障碍)、lh(隐藏)\n\n3. **元数据**: `m:key=value`\n   - desc: 地图标题\n   - fm: 移动规则(F自由移动/A相邻移动/N禁止移动)\n\n## 示例格式\n<MapGraph>\nm:desc=古镇探险图\nm:fm=A\n\nn:zx|c|镇中心@user|100|100|c|25\nn:sl|c|森林小路|150|100|r|40x30\nn:gc|c|古城入口|100|170|r|35x25\nn:st|c|市集摊位|50|100|r|30x20\nn:hx|c|后巷|150|50|c|15\nn:dx|c|洞穴入口|200|120|c|20\nn:jd|c|酒店|60|150|r|25x20\nn:cb|c|城堡塔楼|50|200|c|18\nn:my|c|码头|200|180|r|45x25\n\ne:zx|sl|c\ne:zx|st|c\ne:zx|gc|c\ne:zx|hx|c\ne:zx|jd|c\ne:sl|dx|c\ne:gc|cb|lg\ne:st|hx|ld\ne:gc|my|c\ne:jd|cb|c\ne:dx|my|lb\ne:hx|jd|c\n</MapGraph>",
                "constant": true,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "after_char",
                "use_regex": true,
                "extensions": {
                    "position": 4,
                    "exclude_recursion": false,
                    "display_index": 5,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 1,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 6,
                "keys": [
                    "展开新剧情"
                ],
                "secondary_keys": [],
                "comment": "场景切换",
                "content": "注意!\n请于下个响应重新编写<MapGraph></MapGraph>标签内的内容为全新地点全新内容,**绝对不能**跟上个响应里的内容有任何重复!",
                "constant": false,
                "selective": true,
                "insertion_order": 999,
                "enabled": true,
                "position": "after_char",
                "use_regex": true,
                "extensions": {
                    "position": 4,
                    "exclude_recursion": false,
                    "display_index": 6,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 0,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": true,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            }
        ],
        "name": "可视化地图导航"
    }
}