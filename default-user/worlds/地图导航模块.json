{
    "entries": {
        "0": {
            "key": [],
            "keysecondary": [],
            "comment": "",
            "content": "## 地图导航模块生成指令 (优化版 v2)\n\n请根据当前故事情节、场景、角色状态和位置，在你的**主要回复内容结束之后**（例如 `</content>` 之后或整个回复的末尾），生成一份用于地图导航界面的数据。请务必将数据包裹在 `<details>` 和 `<map_data>` 标签内，并严格遵守以下格式和规则：\n\n**1. 基本结构:**\n\n\n<details><summary>**地图导航**</summary>\n<map_data>\n[MOVEBLOCK:YES/NO]  <-- 必须是第一行\n[主地点名称1\n- 次级地点A: 角色1, 物品A\n- 次级地点B: 角色2\n- 次级地点C: ] <-- 或留空: - 次级地点C:\n[主地点名称2\n- 次级地点D: 角色3, NPC路人\n- 次级地点E: ]\n...\n</map_data>\n</details>\n\n\n**2. 核心要素与规则:**\n\n*   **移动限制 (`MOVEBLOCK`)**:\n    *   数据的第一行**必须**是 `[MOVEBLOCK:YES]` 或 `[MOVEBLOCK:NO]`。\n    *   如果 `{{user}}` 因当前剧情（例如：被绑架、锁在某处、受伤严重、任务限制等）**无法自由移动**到地图上其他区域，则输出 `[MOVEBLOCK:YES]`。\n    *   在大多数情况下，如果 `{{user}}` 可以自由行动，则输出 `[MOVEBLOCK:NO]`。\n\n*   **主地点**:\n    *   包含 **3 到 5 个** 主要的地理区域或建筑群。\n    *   每个主地点名称**必须**独占一行，并用方括号 `[]` 包裹，例如 `[教学楼]`。\n\n*   **次级地点**:\n    *   每个主地点下包含 **2 到 4 个** 更具体的地点或房间。\n    *   每个次级地点**必须**以 `- ` (短横线加空格) 开头。\n    *   次级地点名称后紧跟一个 **英文冒号** `:`。\n\n*   **角色/物品**:\n    *   冒号 `:` 后面列出**可能**出现在该次级地点的 **角色名称** 或 **特殊物品/事件**（例如 `宝箱`, `奇怪的脚印`, `神秘的纸条`, `拦路的怪物` 等）。\n    *   各项之间使用 **英文逗号** `,` 分隔（为了清晰，建议逗号后加一个空格，如 `角色A, 角色B`）。\n    *   如果某个次级地点当前**没有**已知的特定角色或物品，则冒号 `:` 后面 **留空**。格式可以是 `- 次级地点C: ]` 或 `- 次级地点C:` 均可（后者更简洁）。\n\n*   **角色放置逻辑 (极其重要!)**:\n    *   **当前场景排除**: **绝对不能** 将 **当前正与 `{{user}}` 在同一地点进行互动的角色** 放置在地图上的 **任何其他** 次级地点。他们只存在于当前场景（地图外）。\n    *   **禁止 `{{user}}`**: 地图数据中 **任何位置** 都 **不允许** 出现 `{{user}}` 这个名字。\n    *   **唯一性**: 同一个 **特定命名角色** (非泛指NPC) **不应该** 同时出现在地图的 **多个不同** 次级地点。\n    *   **合理性**: 角色的分布需要符合故事逻辑、人物关系和时间点。例如，老师通常在办公室或教室，商店老板在商店里。\n    *   **NPC填充**: 可以根据需要，在合适的地点添加一些合理的、非关键的 **NPC** (例如 `学生`, `行人`, `店员`, `邻居`) 来让世界显得更真实，并避免地图过于空旷。\n\n**3. 格式强调:**\n\n*   请严格遵守方括号 `[]`、短横线 `- `、冒号 `:`、逗号 `,` 的使用。\n*   所有标点符号请使用 **英文半角** 字符。\n*   确保每个 `[主地点]` 和 `- 次级地点:` 都在新的一行。\n*   `[MOVEBLOCK:...]` 必须是 `<map_data>` 内的第一行内容。\n\n**4. 目的:**\n\n*   这份数据将 **直接被程序解析** 用于生成用户交互界面，因此 **格式的精确性** 和 **内容的逻辑性** 至关重要。任何格式错误都可能导致界面显示异常。\n\n**优化后的示范:**\n\n\n\n<details><summary>**地图导航**</summary>\n<map_data>\n[MOVEBLOCK:NO]\n[学校区域\n- 教室走廊: 风纪委员\n- 图书馆: 图书管理员, 一本旧日记\n- 体育馆后面: 不良少年]\n[商业街\n- 咖啡厅: 服务员小雅\n- 便利店: 兼职学生, 打折促销海报\n- 游戏厅: 灯山 雪]\n[住宅区\n- 公园入口: 晨练的老人\n- 千纱家门口: 千纱的自行车\n- 小巷深处: ]\n</map_data>\n</details>\n",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 0,
            "displayIndex": 0,
            "extensions": {
                "position": 4,
                "exclude_recursion": false,
                "display_index": 0,
                "probability": 100,
                "useProbability": true,
                "depth": 0,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        }
    },
    "originalData": {
        "entries": [
            {
                "id": 0,
                "keys": [],
                "secondary_keys": [],
                "comment": "",
                "content": "## 地图导航模块\n\n请根据故事与前文,于</content>后或者正文结束后生成一个地图导航数据，需要折叠起来,包含以下元素：\n\n1. 3-5个主要地点区域\n2. 当{{user}}因为各种不可抗力无法移动,比如被绑架,被锁在体育仓库,则输出MOVEBLOCK:YES\n3. 每个主要地点下包含2-4个次级地点\n4. 每个次级地点可能存在的角色,要尽可能合理地包含故事中的登场角色（用逗号分隔，如果没有角色可以留空）\n5. 移动主体为{{user}},所以地图上不能出现{{user}}\n6. 当前场景内的角色不应该出现在其他地方\n7. 角色不应该重复出现在复数地点,可适当生成一些NPC\n8. 冒险类故事可适当生成一些非角色,例如宝箱,怪物,敌人等\n\n数据格式要求：\n<details><summary>**地图导航**</summary>\n<map_data>\n[MOVEBLOCK:NO]\n[主地点1\n- 次级地点A: 角色1, 角色2\n- 次级地点B: 角色3\n- 次级地点C: ]\n[主地点2\n- 次级地点D: 角色4, 角色5\n- 次级地点E: 角色6]\n</map_data>\n</details>\n\n示范:\n<details><summary>**地图导航**</summary>\n <map_data>\n [MOVEBLOCK:NO]\n [哲的家\n - 哲的房间:\n - 客厅:\n - 玄关: ]\n [住宅区街道\n - 哲家门口: 哲\n - 千纱家门口:千纱\n - 公园入口: ]\n [商业街\n - 便利店:\n - 游戏厅:灯山 雪\n - 书店: ]\n </map_data>\n</details>\n#请根据故事的设定、场景和人物关系生成这个数据，使其符合故事情境和角色分布。\n",
                "constant": true,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "after_char",
                "use_regex": true,
                "extensions": {
                    "position": 4,
                    "exclude_recursion": false,
                    "display_index": 0,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 0,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            }
        ],
        "name": "地图导航模块"
    }
}